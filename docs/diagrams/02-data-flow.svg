<svg width="1400" height="1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- High contrast gradients -->
    <linearGradient id="blackGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#000;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#333;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="whiteGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#fff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f0f0f0;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="3" dy="3" stdDeviation="2" flood-color="#000" flood-opacity="0.3"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1400" height="1000" fill="#fff" stroke="#000" stroke-width="3"/>

  <!-- Title -->
  <text x="700" y="50" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="28" font-weight="bold" fill="#000">
    AI Customer Service Agent - Data Flow Architecture
  </text>

  <!-- Phase 1: Customer Input -->
  <g id="phase1">
    <rect x="50" y="100" width="1300" height="120" fill="none" stroke="#000" stroke-width="2" stroke-dasharray="10,5"/>
    <text x="70" y="130" font-family="Arial Black, sans-serif" font-size="16" font-weight="bold" fill="#000">PHASE 1: CUSTOMER INPUT</text>

    <!-- Customer -->
    <circle cx="200" cy="170" r="40" fill="#000" stroke="#fff" stroke-width="3" filter="url(#shadow)"/>
    <text x="200" y="175" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="12" font-weight="bold" fill="#fff">CUSTOMER</text>

    <!-- Arrow to Session Manager -->
    <path d="M 250 170 L 350 170" stroke="#000" stroke-width="4" marker-end="url(#blackArrow)" fill="none"/>
    <text x="300" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#000">INQUIRY</text>

    <!-- Session Manager -->
    <rect x="370" y="140" width="160" height="60" fill="url(#whiteGrad)" stroke="#000" stroke-width="3" rx="10" filter="url(#shadow)"/>
    <text x="450" y="165" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="12" font-weight="bold" fill="#000">SESSION MANAGER</text>
    <text x="450" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#000">Context • History • State</text>
  </g>

  <!-- Phase 2: AI Processing -->
  <g id="phase2">
    <rect x="50" y="250" width="1300" height="180" fill="none" stroke="#000" stroke-width="2" stroke-dasharray="10,5"/>
    <text x="70" y="280" font-family="Arial Black, sans-serif" font-size="16" font-weight="bold" fill="#000">PHASE 2: AI INTELLIGENCE LAYER</text>

    <!-- Arrow from Session Manager to Agent -->
    <path d="M 450 210 L 450 300" stroke="#000" stroke-width="4" marker-end="url(#blackArrow)" fill="none"/>

    <!-- Betty's Bird Brain (Diamond shape for decision) -->
    <polygon points="450,320 520,350 450,380 380,350" fill="#000" stroke="#fff" stroke-width="3" filter="url(#shadow)"/>
    <text x="450" y="345" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="10" font-weight="bold" fill="#fff">BETTY'S</text>
    <text x="450" y="358" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="10" font-weight="bold" fill="#fff">BIRD BRAIN</text>

    <!-- Intent Classifier -->
    <rect x="600" y="320" width="140" height="60" fill="url(#whiteGrad)" stroke="#000" stroke-width="3" rx="10" filter="url(#shadow)"/>
    <text x="670" y="345" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="11" font-weight="bold" fill="#000">INTENT CLASSIFIER</text>
    <text x="670" y="358" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#000">Product • Store • Care</text>

    <!-- Tool Router -->
    <rect x="800" y="320" width="140" height="60" fill="#000" stroke="#fff" stroke-width="3" rx="10" filter="url(#shadow)"/>
    <text x="870" y="345" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="11" font-weight="bold" fill="#fff">TOOL ROUTER</text>
    <text x="870" y="358" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fff">Dynamic Selection</text>

    <!-- Arrows -->
    <path d="M 520 350 L 600 350" stroke="#000" stroke-width="3" marker-end="url(#blackArrow)" fill="none"/>
    <path d="M 740 350 L 800 350" stroke="#000" stroke-width="3" marker-end="url(#blackArrow)" fill="none"/>
  </g>

  <!-- Phase 3: Parallel Tool Execution -->
  <g id="phase3">
    <rect x="50" y="460" width="1300" height="200" fill="none" stroke="#000" stroke-width="2" stroke-dasharray="10,5"/>
    <text x="70" y="490" font-family="Arial Black, sans-serif" font-size="16" font-weight="bold" fill="#000">PHASE 3: PARALLEL DATA RETRIEVAL</text>

    <!-- Tool connections (fan out) -->
    <path d="M 870 380 L 300 520" stroke="#000" stroke-width="3" marker-end="url(#blackArrow)" fill="none"/>
    <path d="M 870 380 L 700 520" stroke="#000" stroke-width="3" marker-end="url(#blackArrow)" fill="none"/>
    <path d="M 870 380 L 1100 520" stroke="#000" stroke-width="3" marker-end="url(#blackArrow)" fill="none"/>

    <!-- Database Tool -->
    <rect x="200" y="510" width="140" height="80" fill="#000" stroke="#fff" stroke-width="3" rx="10" filter="url(#shadow)"/>
    <text x="270" y="535" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="11" font-weight="bold" fill="#fff">DATABASE TOOL</text>
    <text x="270" y="548" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fff">MCP Toolbox</text>
    <text x="270" y="560" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fff">MySQL Query</text>
    <text x="270" y="572" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fff">Real-time Pricing</text>

    <!-- Datastore Search -->
    <rect x="600" y="510" width="140" height="80" fill="url(#whiteGrad)" stroke="#000" stroke-width="3" rx="10" filter="url(#shadow)"/>
    <text x="670" y="535" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="11" font-weight="bold" fill="#000">DATASTORE SEARCH</text>
    <text x="670" y="548" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#000">Vertex AI Search</text>
    <text x="670" y="560" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#000">Document Retrieval</text>
    <text x="670" y="572" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#000">Semantic Search</text>

    <!-- Web Search Tool -->
    <rect x="1000" y="510" width="140" height="80" fill="#000" stroke="#fff" stroke-width="3" rx="10" filter="url(#shadow)"/>
    <text x="1070" y="535" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="11" font-weight="bold" fill="#fff">WEB SEARCH</text>
    <text x="1070" y="548" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fff">Google Search API</text>
    <text x="1070" y="560" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fff">Current Research</text>
    <text x="1070" y="572" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fff">Trend Analysis</text>
  </g>

  <!-- Phase 4: Data Sources -->
  <g id="phase4">
    <rect x="50" y="690" width="1300" height="120" fill="#f0f0f0" stroke="#000" stroke-width="2"/>
    <text x="70" y="720" font-family="Arial Black, sans-serif" font-size="16" font-weight="bold" fill="#000">PHASE 4: DATA SOURCES</text>

    <!-- Data source connections -->
    <path d="M 270 590 L 270 740" stroke="#000" stroke-width="2" marker-end="url(#blackArrow)" fill="none"/>
    <path d="M 670 590 L 570 740" stroke="#000" stroke-width="2" marker-end="url(#blackArrow)" fill="none"/>
    <path d="M 670 590 L 770 740" stroke="#000" stroke-width="2" marker-end="url(#blackArrow)" fill="none"/>
    <path d="M 1070 590 L 1070 740" stroke="#000" stroke-width="2" marker-end="url(#blackArrow)" fill="none"/>

    <!-- Product DB -->
    <ellipse cx="270" cy="750" rx="60" ry="30" fill="#000" stroke="#fff" stroke-width="2"/>
    <text x="270" y="755" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="10" font-weight="bold" fill="#fff">PRODUCT DB</text>

    <!-- Store Docs -->
    <ellipse cx="570" cy="750" rx="60" ry="30" fill="#fff" stroke="#000" stroke-width="2"/>
    <text x="570" y="755" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="10" font-weight="bold" fill="#000">STORE DOCS</text>

    <!-- Knowledge Base -->
    <ellipse cx="770" cy="750" rx="60" ry="30" fill="#fff" stroke="#000" stroke-width="2"/>
    <text x="770" y="755" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="10" font-weight="bold" fill="#000">KNOWLEDGE</text>

    <!-- External Web -->
    <ellipse cx="1070" cy="750" rx="60" ry="30" fill="#000" stroke="#fff" stroke-width="2"/>
    <text x="1070" y="755" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="10" font-weight="bold" fill="#fff">LIVE WEB</text>
  </g>

  <!-- Phase 5: Response Generation -->
  <g id="phase5">
    <rect x="50" y="840" width="1300" height="120" fill="none" stroke="#000" stroke-width="2" stroke-dasharray="10,5"/>
    <text x="70" y="870" font-family="Arial Black, sans-serif" font-size="16" font-weight="bold" fill="#000">PHASE 5: RESPONSE GENERATION</text>

    <!-- Data aggregation arrows -->
    <path d="M 400 780 L 600 880" stroke="#000" stroke-width="3" marker-end="url(#blackArrow)" fill="none"/>
    <path d="M 670 780 L 650 880" stroke="#000" stroke-width="3" marker-end="url(#blackArrow)" fill="none"/>
    <path d="M 940 780 L 700 880" stroke="#000" stroke-width="3" marker-end="url(#blackArrow)" fill="none"/>

    <!-- Response Synthesis -->
    <rect x="580" y="880" width="160" height="60" fill="url(#whiteGrad)" stroke="#000" stroke-width="3" rx="10" filter="url(#shadow)"/>
    <text x="660" y="905" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="12" font-weight="bold" fill="#000">RESPONSE SYNTHESIS</text>
    <text x="660" y="920" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#000">Data Integration • Context Enrichment</text>

    <!-- Quality Control -->
    <rect x="800" y="880" width="140" height="60" fill="#000" stroke="#fff" stroke-width="3" rx="10" filter="url(#shadow)"/>
    <text x="870" y="905" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="12" font-weight="bold" fill="#fff">QUALITY CONTROL</text>
    <text x="870" y="920" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">Guardrails • Safety</text>

    <!-- Final Response -->
    <circle cx="1100" cy="910" r="40" fill="#000" stroke="#fff" stroke-width="3" filter="url(#shadow)"/>
    <text x="1100" y="905" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="10" font-weight="bold" fill="#fff">FINAL</text>
    <text x="1100" y="918" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="10" font-weight="bold" fill="#fff">RESPONSE</text>

    <!-- Arrows -->
    <path d="M 740 910 L 800 910" stroke="#000" stroke-width="3" marker-end="url(#blackArrow)" fill="none"/>
    <path d="M 940 910 L 1060 910" stroke="#000" stroke-width="3" marker-end="url(#blackArrow)" fill="none"/>
  </g>

  <!-- Arrow markers -->
  <defs>
    <marker id="blackArrow" markerWidth="12" markerHeight="8" refX="12" refY="4" orient="auto" markerUnits="strokeWidth">
      <polygon points="0 0, 12 4, 0 8" fill="#000" />
    </marker>
  </defs>

  <!-- Legend -->
  <g id="legend">
    <rect x="1150" y="100" width="200" height="180" fill="#fff" stroke="#000" stroke-width="2" rx="5"/>
    <text x="1250" y="125" text-anchor="middle" font-family="Arial Black, sans-serif" font-size="14" font-weight="bold" fill="#000">LEGEND</text>

    <!-- Input/Output -->
    <circle cx="1170" cy="150" r="15" fill="#000" stroke="#fff" stroke-width="2"/>
    <text x="1200" y="155" font-family="Arial, sans-serif" font-size="10" fill="#000">Input/Output</text>

    <!-- Processing -->
    <rect x="1155" y="165" width="30" height="20" fill="#fff" stroke="#000" stroke-width="2" rx="3"/>
    <text x="1200" y="178" font-family="Arial, sans-serif" font-size="10" fill="#000">Processing</text>

    <!-- AI Decision -->
    <polygon points="1170,195 1185,205 1170,215 1155,205" fill="#000" stroke="#fff" stroke-width="2"/>
    <text x="1200" y="208" font-family="Arial, sans-serif" font-size="10" fill="#000">AI Decision</text>

    <!-- Data Store -->
    <ellipse cx="1170" cy="235" rx="15" ry="8" fill="#000" stroke="#fff" stroke-width="2"/>
    <text x="1200" y="238" font-family="Arial, sans-serif" font-size="10" fill="#000">Data Store</text>

    <!-- Flow Direction -->
    <path d="M 1160 250 L 1180 250" stroke="#000" stroke-width="3" marker-end="url(#blackArrow)" fill="none"/>
    <text x="1200" y="255" font-family="Arial, sans-serif" font-size="10" fill="#000">Data Flow</text>
  </g>
</svg>