<svg width="1200" height="1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="componentGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#6a11cb;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2575fc;stop-opacity:1" />
    </linearGradient>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
    <filter id="dropShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="3" dy="3" stdDeviation="2" flood-color="#000000" flood-opacity="0.3"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1200" height="1000" fill="#f8f9fa" stroke="#e9ecef" stroke-width="2"/>

  <!-- Title -->
  <text x="600" y="40" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#2c3e50">
    Component Architecture - Betty's Bird Brain AI Agent
  </text>

  <!-- Main Agent Container -->
  <g id="agentContainer">
    <rect x="50" y="80" width="1100" height="180" fill="none" stroke="#007bff" stroke-width="3" rx="15" filter="url(#dropShadow)"/>
    <text x="70" y="110" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#007bff">Core Agent Framework (Google ADK)</text>

    <!-- Agent Core -->
    <rect x="100" y="130" width="200" height="100" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="10"/>
    <text x="200" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#1976d2">Agent Core</text>
    <text x="200" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">agent.py</text>
    <text x="200" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Gemini 2.5 Flash</text>
    <text x="200" y="200" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Model Integration</text>
    <text x="200" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Response Generation</text>

    <!-- Prompt Engine -->
    <rect x="330" y="130" width="180" height="100" fill="#fff3cd" stroke="#856404" stroke-width="2" rx="10"/>
    <text x="420" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#856404">Prompt Engine</text>
    <text x="420" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">agent-prompt.txt</text>
    <text x="420" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">System Instructions</text>
    <text x="420" y="200" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Persona Definition</text>
    <text x="420" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Guardrail Rules</text>

    <!-- Session Management -->
    <rect x="540" y="130" width="180" height="100" fill="#d4edda" stroke="#28a745" stroke-width="2" rx="10"/>
    <text x="630" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#28a745">Session Manager</text>
    <text x="630" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">InMemorySessionService</text>
    <text x="630" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Context Preservation</text>
    <text x="630" y="200" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Multi-turn Support</text>
    <text x="630" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Memory Management</text>

    <!-- Tool Orchestrator -->
    <rect x="750" y="130" width="180" height="100" fill="#f8d7da" stroke="#dc3545" stroke-width="2" rx="10"/>
    <text x="840" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#dc3545">Tool Orchestrator</text>
    <text x="840" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Dynamic Tool Selection</text>
    <text x="840" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Parallel Execution</text>
    <text x="840" y="200" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Result Aggregation</text>
    <text x="840" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Error Handling</text>

    <!-- Monitor & Analytics -->
    <rect x="960" y="130" width="160" height="100" fill="#e2e3e5" stroke="#6c757d" stroke-width="2" rx="10"/>
    <text x="1040" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#6c757d">Monitor & Analytics</text>
    <text x="1040" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Performance Tracking</text>
    <text x="1040" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Conversation Logs</text>
    <text x="1040" y="200" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Quality Metrics</text>
    <text x="1040" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Error Tracking</text>
  </g>

  <!-- Tools Layer -->
  <g id="toolsLayer">
    <rect x="50" y="300" width="1100" height="200" fill="none" stroke="#6f42c1" stroke-width="3" rx="15" filter="url(#dropShadow)"/>
    <text x="70" y="330" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#6f42c1">Intelligent Tools Layer</text>

    <!-- Database Tool -->
    <rect x="100" y="350" width="200" height="120" fill="#fff" stroke="#dc3545" stroke-width="2" rx="10"/>
    <text x="200" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#dc3545">Database Tool</text>
    <text x="200" y="390" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">toolbox_tools.py</text>

    <rect x="120" y="405" width="160" height="25" fill="#ffe6e6" stroke="#dc3545" stroke-width="1" rx="3"/>
    <text x="200" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">MCP Toolbox Client</text>

    <rect x="120" y="435" width="160" height="25" fill="#ffe6e6" stroke="#dc3545" stroke-width="1" rx="3"/>
    <text x="200" y="450" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">SQL Query Builder</text>

    <!-- Datastore Search Tool -->
    <rect x="350" y="350" width="200" height="120" fill="#fff" stroke="#6f42c1" stroke-width="2" rx="10"/>
    <text x="450" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#6f42c1">Datastore Search</text>
    <text x="450" y="390" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">datastore.py</text>

    <rect x="370" y="405" width="160" height="25" fill="#f0e6ff" stroke="#6f42c1" stroke-width="1" rx="3"/>
    <text x="450" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Discovery Engine Client</text>

    <rect x="370" y="435" width="160" height="25" fill="#f0e6ff" stroke="#6f42c1" stroke-width="1" rx="3"/>
    <text x="450" y="450" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Semantic Search</text>

    <!-- Web Search Tool -->
    <rect x="600" y="350" width="200" height="120" fill="#fff" stroke="#20c997" stroke-width="2" rx="10"/>
    <text x="700" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#20c997">Web Search Tool</text>
    <text x="700" y="390" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">search_agent.py</text>

    <rect x="620" y="405" width="160" height="25" fill="#e6fff0" stroke="#20c997" stroke-width="1" rx="3"/>
    <text x="700" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Google Search API</text>

    <rect x="620" y="435" width="160" height="25" fill="#e6fff0" stroke="#20c997" stroke-width="1" rx="3"/>
    <text x="700" y="450" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Result Processing</text>

    <!-- Configuration Management -->
    <rect x="850" y="350" width="200" height="120" fill="#fff" stroke="#fd7e14" stroke-width="2" rx="10"/>
    <text x="950" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#fd7e14">Config Management</text>
    <text x="950" y="390" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">tools.yaml</text>

    <rect x="870" y="405" width="160" height="25" fill="#fff3cd" stroke="#fd7e14" stroke-width="1" rx="3"/>
    <text x="950" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Tool Definitions</text>

    <rect x="870" y="435" width="160" height="25" fill="#fff3cd" stroke="#fd7e14" stroke-width="1" rx="3"/>
    <text x="950" y="450" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Connection Settings</text>
  </g>

  <!-- Data Access Layer -->
  <g id="dataLayer">
    <rect x="50" y="540" width="1100" height="200" fill="none" stroke="#17a2b8" stroke-width="3" rx="15" filter="url(#dropShadow)"/>
    <text x="70" y="570" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#17a2b8">Data Access & Integration Layer</text>

    <!-- MCP Toolbox Server -->
    <rect x="100" y="590" width="180" height="120" fill="#fff" stroke="#dc3545" stroke-width="2" rx="10"/>
    <text x="190" y="615" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#dc3545">MCP Toolbox Server</text>
    <text x="190" y="630" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Database Proxy</text>
    <text x="190" y="645" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Query Optimization</text>
    <text x="190" y="660" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Connection Pool</text>
    <text x="190" y="675" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Security Layer</text>
    <text x="190" y="690" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">localhost:5000</text>

    <!-- Vertex AI Search Engine -->
    <rect x="320" y="590" width="180" height="120" fill="#fff" stroke="#6f42c1" stroke-width="2" rx="10"/>
    <text x="410" y="615" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#6f42c1">Vertex AI Search</text>
    <text x="410" y="630" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Document Indexing</text>
    <text x="410" y="645" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Semantic Understanding</text>
    <text x="410" y="660" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Content Extraction</text>
    <text x="410" y="675" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Ranking Algorithm</text>
    <text x="410" y="690" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">GCP Service</text>

    <!-- Google Search API -->
    <rect x="540" y="590" width="180" height="120" fill="#fff" stroke="#20c997" stroke-width="2" rx="10"/>
    <text x="630" y="615" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#20c997">Google Search API</text>
    <text x="630" y="630" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Real-time Queries</text>
    <text x="630" y="645" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Result Filtering</text>
    <text x="630" y="660" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Content Validation</text>
    <text x="630" y="675" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Rate Limiting</text>
    <text x="630" y="690" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">External API</text>

    <!-- Authentication & Security -->
    <rect x="760" y="590" width="180" height="120" fill="#fff" stroke="#6c757d" stroke-width="2" rx="10"/>
    <text x="850" y="615" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#6c757d">Auth & Security</text>
    <text x="850" y="630" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">API Key Management</text>
    <text x="850" y="645" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Service Account Auth</text>
    <text x="850" y="660" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Encryption at Rest</text>
    <text x="850" y="675" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">TLS Connections</text>
    <text x="850" y="690" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">IAM Policies</text>
  </g>

  <!-- Physical Storage Layer -->
  <g id="storageLayer">
    <rect x="50" y="780" width="1100" height="180" fill="none" stroke="#28a745" stroke-width="3" rx="15" filter="url(#dropShadow)"/>
    <text x="70" y="810" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#28a745">Physical Data Storage Layer</text>

    <!-- MySQL Database -->
    <rect x="100" y="830" width="200" height="100" fill="#fff" stroke="#dc3545" stroke-width="2" rx="10"/>
    <text x="200" y="855" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#dc3545">MySQL Database</text>
    <text x="200" y="870" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Product Catalog</text>
    <text x="200" y="885" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Pricing Tables</text>
    <text x="200" y="900" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Inventory Status</text>
    <text x="200" y="915" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Relational Structure</text>

    <!-- PDF Documents -->
    <rect x="350" y="830" width="200" height="100" fill="#fff" stroke="#6f42c1" stroke-width="2" rx="10"/>
    <text x="450" y="855" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#6f42c1">PDF Document Store</text>
    <text x="450" y="870" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Store Hours PDF</text>
    <text x="450" y="885" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Staff Information</text>
    <text x="450" y="900" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Store History</text>
    <text x="450" y="915" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Policies & FAQs</text>

    <!-- Search Index -->
    <rect x="600" y="830" width="200" height="100" fill="#fff" stroke="#20c997" stroke-width="2" rx="10"/>
    <text x="700" y="855" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#20c997">Search Index Cache</text>
    <text x="700" y="870" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Query Results</text>
    <text x="700" y="885" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Cached Content</text>
    <text x="700" y="900" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Response Snippets</text>
    <text x="700" y="915" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Performance Data</text>

    <!-- Configuration Files -->
    <rect x="850" y="830" width="200" height="100" fill="#fff" stroke="#fd7e14" stroke-width="2" rx="10"/>
    <text x="950" y="855" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fd7e14">Configuration Files</text>
    <text x="950" y="870" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Environment Variables</text>
    <text x="950" y="885" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">API Credentials</text>
    <text x="950" y="900" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Tool Configurations</text>
    <text x="950" y="915" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">System Settings</text>
  </g>

  <!-- Connections -->
  <!-- Agent to Tools -->
  <line x1="200" y1="230" x2="200" y2="350" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="420" y1="230" x2="450" y2="350" stroke="#6f42c1" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="630" y1="230" x2="700" y2="350" stroke="#20c997" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="840" y1="230" x2="950" y2="350" stroke="#fd7e14" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Tools to Data Access -->
  <line x1="200" y1="470" x2="190" y2="590" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="450" y1="470" x2="410" y2="590" stroke="#6f42c1" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="700" y1="470" x2="630" y2="590" stroke="#20c997" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="950" y1="470" x2="850" y2="590" stroke="#6c757d" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Data Access to Storage -->
  <line x1="190" y1="710" x2="200" y2="830" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="410" y1="710" x2="450" y2="830" stroke="#6f42c1" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="630" y1="710" x2="700" y2="830" stroke="#20c997" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="850" y1="710" x2="950" y2="830" stroke="#6c757d" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Internal Agent Connections -->
  <line x1="300" y1="180" x2="330" y2="180" stroke="#666" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="510" y1="180" x2="540" y2="180" stroke="#666" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="720" y1="180" x2="750" y2="180" stroke="#666" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="930" y1="180" x2="960" y2="180" stroke="#666" stroke-width="1" marker-end="url(#arrowhead)"/>
</svg>